#include "main.h"

void gpio_config(void)
{
	RCC->AHB1ENR   = 0x09;
	RCC->APB2ENR |= 0x4000;
	
	GPIOD->MODER 	 = 0x55000000;
	GPIOD->OSPEEDR = 0xFF000000;
	GPIOD->PUPDR   = 0xAA000000;
	GPIOD->OTYPER  = 0x00000000;
	
	GPIOA->MODER &= 0xFFFFFFFC;
	GPIOA->OSPEEDR = 0x00000003;
	GPIOA->PUPDR = 0x00000002;
	GPIOA->OTYPER = 0x0000;
	
	
	
	SYSCFG->EXTICR[0] = SYSCFG_EXTICR1_EXTI0_PA;
	SYSCFG->EXTICR[1] = SYSCFG_EXTICR1_EXTI0_PA;
	SYSCFG->EXTICR[2] = SYSCFG_EXTICR1_EXTI0_PA;
	SYSCFG->EXTICR[3] = SYSCFG_EXTICR1_EXTI0_PA;
	
	EXTI->IMR |= 0x1;
	EXTI->EMR &= 0xE;
	EXTI->RTSR |= 0x1;
	EXTI->FTSR &= 0xE;
}
